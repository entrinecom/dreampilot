var $dp,DreamPilot,dp;DreamPilot=function(){function t(){$(function(t){return function(){return t.checkDependencies().setupApps()}}(this))}var e,r;return e={},r=t,t.prefix="dp-",t.e=function(t,e){return jQuery(t,e)},t.prototype.e=function(t,e){return r.e(t,e)},t.attribute=function(t){return r.prefix+t},t.selectorForAttribute=function(t){return"["+r.attribute(t)+"]"},t.prototype.checkDependencies=function(){if("undefined"==typeof jQuery)throw"jQuery needed";if("undefined"==typeof jsep)throw"jsep needed";return this},t.prototype.setupApps=function(){return this.e(r.selectorForAttribute($dp.Application.appAttr)).each(function(){var t,n;if(t=r.e(this),n=t.attr(r.attribute($dp.Application.appAttr)),!n)throw"Application with empty name found";return e[n]=new $dp.Application(t)}),this},t}(),$dp=DreamPilot,dp=new DreamPilot,DreamPilot.Application=function(){function t(t){this.$element=t,this.setupScope().setupAttributes()}var e;return e=t,t.appAttr="app",t.classAttr="class",t.prototype.getScope=function(){return this.Scope},t.prototype.setupScope=function(){return this.Scope=new $dp.Scope,this},t.prototype.setupAttributes=function(){var t;return t=this,$dp.e($dp.selectorForAttribute(e.classAttr)).each(function(){var r,n,o,u;r=$dp.e(this),o=$dp.Parser.object(r.attr($dp.attribute(e.classAttr)));for(n in o)u=o[n],r.toggleClass(n,$dp.Parser.isExpressionTrue(u,t));return!0}),this},t}(),DreamPilot.Model=function(){function t(){}var e,r;return r={},e={change:{}},t.prototype.get=function(t){return"undefined"!=typeof r[t]?r[t]:null},t.prototype.set=function(t,n){var o,u,i;if(null==n&&(n=null),"object"==typeof t&&null===n)for(u in t)i=t[u],this.set(u,i);else r[t]=n,"function"==typeof(o=e.change)[t]&&o[t]();return this},t.prototype.onChange=function(t,r){return e.change[t]=r,this},t}();var extend=function(t,e){function r(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;DreamPilot.Scope=function(t){function e(){e.__super__.constructor.call(this)}return extend(e,t),e}(DreamPilot.Model),DreamPilot.Functions=function(){function t(){}return t.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},t.ltrim=function(t){return t.replace(/^\s+/,"")},t.rtrim=function(t){return t.replace(/\s+$/,"")},t.underscore=function(t){return(t+"").replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})},t.camelize=function(t){return(t+"").replace(/([A-Z])/g,function(t){return"_"+t.toLowerCase()})},t.urlencode=function(t){return encodeURIComponent(t)},t.urldecode=function(t){return decodeURIComponent((t+"").replace(/\+/g,"%20"))},t}(),$dp&&($dp.fn=DreamPilot.Functions);var indexOf=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};DreamPilot.Parser=function(){function t(){}var e;return e=t,t.quotes="'\"`",t.object=function(t){var r,n,o,u,i,c,p,a,f,s;if(t=$dp.fn.trim(t),"{"!==t[0]||"}"!==t.slice(-1))return null;for(t=t.slice(1,t.length-1),c={},p={key:"",value:""},r=function(){return c[$dp.fn.trim(p.key)]=$dp.fn.trim(p.value),p.key=p.value=""},a=null,s="key",o=u=0,i=t.length;u<i;o=++u){if(n=t[o],f=!1,indexOf.call(e.quotes,n)>=0&&(a?a&&n===a&&(a=null,f=!0):(a=n,f=!0)),!a)switch(!1){case":"!==n:s="border";break;case!("border"===s&&!/\s/.test(n)):s="value";break;case","!==n:s="key",r(),f=!0}"border"===s||f||(p[s]+=n)}return(p.key||p.value)&&r(),c},t.isExpressionTrue=function(t,e){var r,n,o;o={binary:{"+":function(t,e){return t+e},"-":function(t,e){return t-e},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},">":function(t,e){return t>e},">=":function(t,e){return t>=e},"<":function(t,e){return t<e},"<=":function(t,e){return t<=e},"==":function(t,e){return t==e},"===":function(t,e){return t===e},"!=":function(t,e){return t!=e}},unary:{"-":function(t){return-t},"+":function(t){return-t},"!":function(t){return!t}},logical:{"&&":function(t,e){return t&&e},"||":function(t,e){return t||e}}},n=function(t){switch(t.type){case"BinaryExpression":if("undefined"==typeof o.binary[t.operator])throw"No callback for binary operator "+t.operator;return o.binary[t.operator](n(t.left),n(t.right));case"UnaryExpression":if("undefined"==typeof o.unary[t.operator])throw"No callback for unary operator "+t.operator;return o.unary[t.operator](n(t.argument));case"LogicalExpression":if("undefined"==typeof o.logical[t.operator])throw"No callback for logical operator "+t.operator;return o.logical[t.operator](n(t.left),n(t.right));case"Identifier":return e.getScope().get(t.name);case"Literal":return t.value;default:throw"Unknown node type "+t.type}};try{return!!n(jsep(t))}catch(u){return r=u,console.log("Expression parsing error ",r),!1}},t}();